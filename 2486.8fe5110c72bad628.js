"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2486],{2486:(Zt,O,p)=>{p.r(O),p.d(O,{HomePageModule:()=>Qt});var k=p(2200),x=p(4341),d=p(9893),R=p(8132),f=p(467);const B={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let j;const J=new Uint8Array(16),g=[];for(let o=0;o<256;++o)g.push((o+256).toString(16).slice(1));function Z(o,n,i){const e=(o=o||{}).random??o.rng?.()??function Q(){if(!j){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");j=crypto.getRandomValues.bind(crypto)}return j(J)}();if(e.length<16)throw new Error("Random bytes length must be >= 16");if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){if((i=i||0)<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let s=0;s<16;++s)n[i+s]=e[s];return n}return function S(o,n=0){return(g[o[n+0]]+g[o[n+1]]+g[o[n+2]]+g[o[n+3]]+"-"+g[o[n+4]]+g[o[n+5]]+"-"+g[o[n+6]]+g[o[n+7]]+"-"+g[o[n+8]]+g[o[n+9]]+"-"+g[o[n+10]]+g[o[n+11]]+g[o[n+12]]+g[o[n+13]]+g[o[n+14]]+g[o[n+15]]).toLowerCase()}(e)}var et=p(9974),nt=p(4360),t=p(3664),h=p(2615),G=p(9330),it=p(9350),st=p(7707);function I(o,n){const i="object"==typeof n;return new Promise((e,s)=>{const r=new st.Ms({next:a=>{e(a),r.unsubscribe()},error:s,complete:()=>{i?e(n.defaultValue):s(new it.G)}});o.subscribe(r)})}var rt=p(1985),at=p(8359);class ct extends at.yU{constructor(n,i){super()}schedule(n,i=0){return this}}const w={setInterval(o,n,...i){const{delegate:e}=w;return e?.setInterval?e.setInterval(o,n,...i):setInterval(o,n,...i)},clearInterval(o){const{delegate:n}=w;return(n?.clearInterval||clearInterval)(o)},delegate:void 0};var lt=p(7908);const $={now:()=>($.delegate||Date).now(),delegate:void 0};class b{constructor(n,i=b.now){this.schedulerActionCtor=n,this.now=i}schedule(n,i=0,e){return new this.schedulerActionCtor(this,n).schedule(e,i)}}b.now=$.now;const pt=new class dt extends b{constructor(n,i=b.now){super(n,i),this.actions=[],this._active=!1}flush(n){const{actions:i}=this;if(this._active)return void i.push(n);let e;this._active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=i.shift());if(this._active=!1,e){for(;n=i.shift();)n.unsubscribe();throw e}}}(class ut extends ct{constructor(n,i){super(n,i),this.scheduler=n,this.work=i,this.pending=!1}schedule(n,i=0){var e;if(this.closed)return this;this.state=n;const s=this.id,r=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(r,s,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(r,this.id,i),this}requestAsyncId(n,i,e=0){return w.setInterval(n.flush.bind(n,this),e)}recycleAsyncId(n,i,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&w.clearInterval(i)}execute(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(n,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,i){let s,e=!1;try{this.work(n)}catch(r){e=!0,s=r||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:n,scheduler:i}=this,{actions:e}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,lt.o)(e,this),null!=n&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,super.unsubscribe()}}});var ft=p(9470);var mt=p(5558);let _t=(()=>{var o;class n{constructor(e){this.http=e,this.apiBase="https://api.arting.ai/api",this.auth="150afc00-5f9e-489b-973c-802e2c67446b"}getSignedUrl(e){var s=this;return(0,f.A)(function*(){return I(s.http.post(`${s.apiBase}/cg/get_oss_signed_urls`,{f_suffixs:[e]}))})()}uploadToOss(e,s,r){var a=this;return(0,f.A)(function*(){const c=new G.Lr({"Content-Type":r});return I(a.http.put(e,s,{headers:c}))})()}initSwap(e,s,r,a,c){var l=this;return(0,f.A)(function*(){const u={authorization:a};return I("image"===e?l.http.post(`${l.apiBase}/fs/singleface`,{target_image_file:r,target_face_file:s},{headers:u}):l.http.post(`${l.apiBase}/fs/gifvideo/mutilface`,{task_type:2,file_type:e,target_medio_url:r,target_source_face_url:s,duration:100,start_clip_sec:0,end_clip_sec:100,face_enhance:c},{headers:u}))})()}pollStatus(e,s,r){const a={authorization:r};return function gt(o=0,n,i=pt){let e=-1;return null!=n&&((0,ft.m)(n)?i=n:e=n),new rt.c(s=>{let r=function ht(o){return o instanceof Date&&!isNaN(o)}(o)?+o-i.now():o;r<0&&(r=0);let a=0;return i.schedule(function(){s.closed||(s.next(a++),0<=e?this.schedule(void 0,e):s.complete())},r)})}(0,"image"===e?5e3:1e4).pipe((0,mt.n)(()=>{if("image"===e)return this.http.get(`${this.apiBase}/fs/result?request_id=${s}`,{headers:a});{const l=new FormData;return l.append("prediction_id",s),l.append("task_type","2"),this.http.post(`${this.apiBase}/mfs/gifvideo/task/status`,l,{headers:a})}}))}static#t=o=()=>(this.\u0275fac=function(s){return new(s||n)(h.KVO(G.Qq))},this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}))}return o(),n})();function H(o,n){this.v=o,this.k=n}function V(o){return new H(o,0)}function v(o){var n,i;function e(r,a){try{var c=o[r](a),l=c.value,u=l instanceof H;Promise.resolve(u?l.v:l).then(function(m){if(u){var y="return"===r?"return":"next";if(!l.k||m.done)return e(y,m);m=o[y](m).value}s(c.done?"return":"normal",m)},function(m){e("throw",m)})}catch(m){s("throw",m)}}function s(r,a){switch(r){case"return":n.resolve({value:a,done:!0});break;case"throw":n.reject(a);break;default:n.resolve({value:a,done:!1})}(n=n.next)?e(n.key,n.arg):i=null}this._invoke=function(r,a){return new Promise(function(c,l){var u={key:r,arg:a,resolve:c,reject:l,next:null};i?i=i.next=u:(n=i=u,e(r,a))})},"function"!=typeof o.return&&(this.return=void 0)}v.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},v.prototype.next=function(o){return this._invoke("next",o)},v.prototype.throw=function(o){return this._invoke("throw",o)},v.prototype.return=function(o){return this._invoke("return",o)};const T=(o,n)=>n.some(i=>o instanceof i);let L,Y;const C=new WeakMap,M=new WeakMap,P=new WeakMap;let A={get(o,n,i){if(o instanceof IDBTransaction){if("done"===n)return C.get(o);if("store"===n)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return _(o[n])},set:(o,n,i)=>(o[n]=i,!0),has:(o,n)=>o instanceof IDBTransaction&&("done"===n||"store"===n)||n in o};function N(o){A=o(A)}function Pt(o){return"function"==typeof o?function wt(o){return function vt(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(o)?function(...n){return o.apply(D(this),n),_(this.request)}:function(...n){return _(o.apply(D(this),n))}}(o):(o instanceof IDBTransaction&&function It(o){if(C.has(o))return;const n=new Promise((i,e)=>{const s=()=>{o.removeEventListener("complete",r),o.removeEventListener("error",a),o.removeEventListener("abort",a)},r=()=>{i(),s()},a=()=>{e(o.error||new DOMException("AbortError","AbortError")),s()};o.addEventListener("complete",r),o.addEventListener("error",a),o.addEventListener("abort",a)});C.set(o,n)}(o),T(o,function bt(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(o,A):o)}function _(o){if(o instanceof IDBRequest)return function kt(o){const n=new Promise((i,e)=>{const s=()=>{o.removeEventListener("success",r),o.removeEventListener("error",a)},r=()=>{i(_(o.result)),s()},a=()=>{e(o.error),s()};o.addEventListener("success",r),o.addEventListener("error",a)});return P.set(n,o),n}(o);if(M.has(o))return M.get(o);const n=Pt(o);return n!==o&&(M.set(o,n),P.set(n,o)),n}const D=o=>P.get(o),jt=["get","getKey","getAll","getAllKeys","count"],Tt=["put","add","delete","clear"],E=new Map;function z(o,n){if(!(o instanceof IDBDatabase)||n in o||"string"!=typeof n)return;if(E.get(n))return E.get(n);const i=n.replace(/FromIndex$/,""),e=n!==i,s=Tt.includes(i);if(!(i in(e?IDBIndex:IDBObjectStore).prototype)||!s&&!jt.includes(i))return;const r=function(){var a=(0,f.A)(function*(c,...l){const u=this.transaction(c,s?"readwrite":"readonly");let m=u.store;return e&&(m=m.index(l.shift())),(yield Promise.all([m[i](...l),s&&u.done]))[0]});return function(l){return a.apply(this,arguments)}}();return E.set(n,r),r}N(o=>({...o,get:(n,i,e)=>z(n,i)||o.get(n,i,e),has:(n,i)=>!!z(n,i)||o.has(n,i)}));const Ct=["continue","continuePrimaryKey","advance"],X={},U=new WeakMap,W=new WeakMap,Mt={get(o,n){if(!Ct.includes(n))return o[n];let i=X[n];return i||(i=X[n]=function(...e){U.set(this,W.get(this)[n](...e))}),i}};function At(){return F.apply(this,arguments)}function F(){return F=function yt(o){return function(){return new v(o.apply(this,arguments))}}(function*(...o){let n=this;if(n instanceof IDBCursor||(n=yield V(n.openCursor(...o))),!n)return;const i=new Proxy(n,Mt);for(W.set(i,n),P.set(i,D(n));n;)yield i,n=yield V(U.get(i)||n.continue()),U.delete(i)}),F.apply(this,arguments)}function K(o,n){return n===Symbol.asyncIterator&&T(o,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&T(o,[IDBIndex,IDBObjectStore])}N(o=>({...o,get:(n,i,e)=>K(n,i)?At:o.get(n,i,e),has:(n,i)=>K(n,i)||o.has(n,i)}));let Dt=(()=>{var o;class n{constructor(){this.dbPromise=function xt(o,n,{blocked:i,upgrade:e,blocking:s,terminated:r}={}){const a=indexedDB.open(o,n),c=_(a);return e&&a.addEventListener("upgradeneeded",l=>{e(_(a.result),l.oldVersion,l.newVersion,_(a.transaction),l)}),i&&a.addEventListener("blocked",l=>i(l.oldVersion,l.newVersion,l)),c.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}("FaceSwapDB11",11,{upgrade(e){e.createObjectStore("faces"),e.createObjectStore("targets"),e.createObjectStore("tasks")}})}set(e,s,r){var a=this;return(0,f.A)(function*(){return(yield a.dbPromise).put(e,r,s)})()}getAll(e){var s=this;return(0,f.A)(function*(){return(yield s.dbPromise).getAll(e)})()}delete(e,s){var r=this;return(0,f.A)(function*(){return(yield r.dbPromise).delete(e,s)})()}clearStore(e){var s=this;return(0,f.A)(function*(){return(yield s.dbPromise).clear(e)})()}clearAll(){var e=this;return(0,f.A)(function*(){yield e.clearStore("faces"),yield e.clearStore("targets"),yield e.clearStore("tasks")})()}static#t=o=()=>(this.\u0275fac=function(s){return new(s||n)},this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}))}return o(),n})();function Et(o,n){1&o&&(t.j41(0,"div",29),t.nrm(1,"ion-icon",30),t.k0s())}function Ut(o,n){1&o&&t.nrm(0,"ion-spinner",31)}function Ft(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-col",22)(1,"div",23)(2,"ion-button",24),t.bIt("click",function(){const s=h.eBV(i).$implicit,r=t.XpG();return h.Njj(r.removeMedia(s.id,"faces"))}),t.nrm(3,"ion-icon",25),t.k0s(),t.nrm(4,"img",26),t.DNE(5,Et,2,0,"div",27)(6,Ut,1,0,"ion-spinner",28),t.k0s()()}if(2&o){const i=n.$implicit;t.R7$(),t.AVh("upload-success","success"===i.status),t.R7$(3),t.Y8G("src",i.localUrl,t.B4B),t.R7$(),t.Y8G("ngIf","success"===i.status),t.R7$(),t.Y8G("ngIf","uploading"===i.status)}}function Ot(o,n){if(1&o&&t.nrm(0,"img",26),2&o){const i=t.XpG().$implicit;t.Y8G("src",i.localUrl,t.B4B)}}function Rt(o,n){if(1&o&&t.nrm(0,"video",37),2&o){const i=t.XpG().$implicit;t.Y8G("src",i.localUrl,t.B4B)}}function Bt(o,n){1&o&&(t.j41(0,"div",29),t.nrm(1,"ion-icon",30),t.k0s())}function St(o,n){1&o&&t.nrm(0,"ion-spinner",38)}function Gt(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-col",32)(1,"div",23)(2,"ion-button",33),t.bIt("click",function(){const s=h.eBV(i).$implicit,r=t.XpG();return h.Njj(r.removeMedia(s.id,"targets"))}),t.nrm(3,"ion-icon",25),t.k0s(),t.DNE(4,Ot,1,1,"img",34)(5,Rt,1,1,"video",35)(6,Bt,2,0,"div",27)(7,St,1,0,"ion-spinner",36),t.k0s()()}if(2&o){const i=n.$implicit;t.R7$(),t.AVh("upload-success","success"===i.status),t.R7$(3),t.Y8G("ngIf","video"!==i.type),t.R7$(),t.Y8G("ngIf","video"===i.type),t.R7$(),t.Y8G("ngIf","success"===i.status),t.R7$(),t.Y8G("ngIf","uploading"===i.status)}}function $t(o,n){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const i=t.XpG();t.R7$(),t.SpI(" Start Swap (",i.faces.length*i.targets.length," combinations)\n")}}function Ht(o,n){1&o&&(t.j41(0,"span"),t.EFF(1," All Tasks Processing...\n"),t.k0s())}function Vt(o,n){1&o&&(t.j41(0,"span"),t.EFF(1," Upload Media First\n"),t.k0s())}function Lt(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-button",39),t.bIt("click",function(){h.eBV(i);const s=t.XpG();return h.Njj(s.downloadAllTasks())}),t.nrm(1,"ion-icon",40),t.EFF(2," Download All "),t.k0s()}}function Yt(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-button",41),t.bIt("click",function(){h.eBV(i);const s=t.XpG();return h.Njj(s.clearAllTasks())}),t.nrm(1,"ion-icon",42),t.k0s()}}function Nt(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-button",51),t.bIt("click",function(){h.eBV(i);const s=t.XpG().$implicit,r=t.XpG();return h.Njj(r.directDownload(s))}),t.nrm(1,"ion-icon",52),t.k0s()}}function zt(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-button",53),t.bIt("click",function(){h.eBV(i);const s=t.XpG().$implicit,r=t.XpG();return h.Njj(r.openUrl(s.outputUrl))}),t.nrm(1,"ion-icon",54),t.k0s()}}function Xt(o,n){1&o&&t.nrm(0,"ion-spinner",55)}function Wt(o,n){if(1&o){const i=t.RV6();t.j41(0,"ion-item")(1,"ion-thumbnail",43),t.nrm(2,"img",26),t.k0s(),t.j41(3,"ion-label")(4,"h3"),t.EFF(5),t.nI1(6,"uppercase"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Status: "),t.j41(9,"ion-badge",44),t.EFF(10),t.k0s()()(),t.j41(11,"div",45),t.DNE(12,Nt,2,0,"ion-button",46)(13,zt,2,0,"ion-button",47),t.j41(14,"ion-button",48),t.bIt("click",function(){const s=h.eBV(i).$implicit,r=t.XpG();return h.Njj(r.deleteSingleTask(s.id))}),t.nrm(15,"ion-icon",49),t.k0s(),t.DNE(16,Xt,1,0,"ion-spinner",50),t.k0s()()}if(2&o){const i=n.$implicit;t.R7$(2),t.Y8G("src",i.faceUrl,t.B4B),t.R7$(3),t.SpI("Type: ",t.bMT(6,7,i.type)),t.R7$(4),t.Y8G("color","success"===i.status?"success":"warning"),t.R7$(),t.JRh(i.status),t.R7$(2),t.Y8G("ngIf","success"===i.status),t.R7$(),t.Y8G("ngIf","success"===i.status&&i.outputUrl),t.R7$(3),t.Y8G("ngIf","downloading"===i.status)}}const Kt=[{path:"",component:(()=>{var o;class n{constructor(e,s,r){this.api=e,this.storage=s,this.toastController=r,this.faces=[],this.targets=[],this.tasks=[],this.faceEnhance=!1,this.isAutomationEnabled=!0}ngOnInit(){var e=this;return(0,f.A)(function*(){const s=yield e.storage.getAll("faces"),r=yield e.storage.getAll("targets");e.tasks=yield e.storage.getAll("tasks"),e.faces=s.map(a=>({...a,localUrl:a.blob?URL.createObjectURL(a.blob):a.localUrl})),e.targets=r.map(a=>({...a,localUrl:a.blob?URL.createObjectURL(a.blob):a.localUrl})),e.restartPolling()})()}handleFileSelect(e,s){var r=this;return(0,f.A)(function*(){const a=e.target.files;for(let c of a){const u={id:crypto.randomUUID(),localUrl:URL.createObjectURL(c),blob:c,type:r.getMediaType(c.type),status:"pending",f_suffix:c.name.split(".").pop()};"faces"===s?r.faces.push(u):r.targets.push(u),r.uploadFile(u,c,s)}})()}uploadFile(e,s,r){var a=this;return(0,f.A)(function*(){try{e.status="uploading";const c=yield a.api.getSignedUrl(e.f_suffix),{put:l,get:u}=c.data.oss_signed_urls[0];yield a.api.uploadToOss(l,s,s.type),e.remoteGetUrl=u,e.status="success",yield a.storage.set(r,e.id,e),a.autoStartProcessing()}catch{e.status="failed",yield a.storage.set(r,e.id,e)}})()}autoStartProcessing(){this.targets.filter(e=>"success"===e.status).forEach(e=>{this.faces.filter(s=>"success"===s.status).forEach(s=>{this.tasks.some(a=>a.faceId===s.id&&a.targetId===e.id)||this.createTask(s,e)})})}startSwapProcess(){this.targets.forEach(e=>{this.faces.forEach(s=>{e.remoteGetUrl&&s.remoteGetUrl&&this.createTask(s,e)})})}createTask(e,s){var r=this;return(0,f.A)(function*(){const a=function q(o,n,i){return!B.randomUUID||n||o?Z(o,n,i):B.randomUUID()}(),c=crypto.randomUUID(),l={id:a,faceId:e.id,targetId:s.id,faceUrl:e.remoteGetUrl,targetUrl:s.remoteGetUrl,type:s.type,status:"waiting",authToken:c};r.tasks.push(l);try{const u=yield r.api.initSwap(s.type,e.remoteGetUrl,s.remoteGetUrl,c,r.faceEnhance);if(1e5!==u.code)throw new Error(u.message);l.predictionId=u.data.prediction_id||u.data.request_id,r.saveAndPoll(l)}catch(u){console.error("Swap Initialization Failed:",u),l.status="failed",r.storage.set("tasks",l.id,l)}})()}saveAndPoll(e){this.storage.set("tasks",e.id,e),this.api.pollStatus(e.type,e.predictionId,e.authToken).pipe(function ot(o,n=!1){return(0,et.N)((i,e)=>{let s=0;i.subscribe((0,nt._)(e,r=>{const a=o(r,s++);(a||n)&&e.next(r),!a&&e.complete()}))})}(s=>"waiting"===s.data.status||0===s.data.status||"processing"===s.data.status,!0)).subscribe({next:s=>{"success"===s.data.status||s.data.result_img_url?(e.status="success",e.outputUrl=s.data.output||s.data.result_img_url,this.storage.set("tasks",e.id,e),this.isAutomationEnabled&&(console.log("Auto-downloading result for task:",e.id),this.directDownload(e))):"failed"===s.data.status&&(e.status="failed",this.storage.set("tasks",e.id,e))},error:s=>{console.error("Polling Error:",s),e.status="failed",this.storage.set("tasks",e.id,e)}})}restartPolling(){this.tasks.filter(e=>"waiting"===e.status&&e.predictionId).forEach(e=>this.saveAndPoll(e))}getMediaType(e){return e.includes("video")?"video":e.includes("gif")?"gif":"image"}removeMedia(e,s){var r=this;return(0,f.A)(function*(){yield r.storage.delete(s,e),"faces"===s?r.faces=r.faces.filter(c=>c.id!==e):r.targets=r.targets.filter(c=>c.id!==e);const a=r.tasks.filter(c=>"faces"===s?c.faceId===e:c.targetId===e);for(let c of a)yield r.storage.delete("tasks",c.id);r.tasks=r.tasks.filter(c=>"faces"===s?c.faceId!==e:c.targetId!==e)})()}directDownload(e){var s=this;return(0,f.A)(function*(){if(!e.outputUrl)return void s.presentToast("Output URL available nahi hai.","danger");const r=e.status;e.status="downloading";try{const a="image"===e.type?"png":"gif"===e.type?"gif":"mp4",c=`success_${Date.now()}.${a}`,l=yield fetch(e.outputUrl);if(!l.ok)throw new Error("Download failed");const u=yield l.blob(),m=window.URL.createObjectURL(u),y=document.createElement("a");y.href=m,y.download=c,document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(m),e.status="success",s.presentToast("Download completed!","success")}catch(a){console.error(a),e.status=r,s.presentToast("Download fail ho gaya.","danger")}yield s.storage.set("tasks",e.id,e)})()}presentToast(e){var s=this;return(0,f.A)(function*(r,a="medium"){(yield s.toastController.create({message:r,duration:3e3,color:a})).present()}).apply(this,arguments)}openUrl(e){console.log(this.tasks),window.open(e,"_blank")}deleteSingleTask(e){var s=this;return(0,f.A)(function*(){s.tasks=s.tasks.filter(r=>r.id!==e),yield s.storage.delete("tasks",e)})()}clearAllTasks(){var e=this;return(0,f.A)(function*(){confirm("Kya aap saare tasks aur target media delete karna chahte hain?")&&(e.tasks=[],e.targets=[],yield e.storage.clearStore("tasks"),yield e.storage.clearStore("targets"))})()}downloadAllTasks(){var e=this;return(0,f.A)(function*(){const s=e.tasks.filter(r=>"success"===r.status&&r.outputUrl);if(0!==s.length){e.presentToast(`${s.length} files download ho rahi hain...`,"primary");for(const r of s)yield e.directDownload(r),yield new Promise(a=>setTimeout(a,500))}else e.presentToast("Download karne ke liye koi successful task nahi hai.","warning")})()}isAllProcessing(){return 0===this.faces.length||0===this.targets.length||this.tasks.length>=this.faces.length*this.targets.length}static#t=o=()=>(this.\u0275fac=function(s){return new(s||n)(t.rXU(_t),t.rXU(Dt),t.rXU(d.K_))},this.\u0275cmp=t.VBU({type:n,selectors:[["app-home"]],standalone:!1,decls:49,vars:11,consts:[["color","primary"],["lines","inset"],["name","sparkles-outline","slot","start","color","primary"],["slot","end",3,"ngModelChange","ngModel"],["lines","none"],["name","flash-outline","slot","start","color","success"],[1,"ion-padding"],["type","file","multiple","","id","faceInput","hidden","",3,"change"],["onclick","document.getElementById('faceInput').click()"],["size","3",4,"ngFor","ngForOf"],["type","file","multiple","","id","targetInput","hidden","",3,"change"],["color","secondary","onclick","document.getElementById('targetInput').click()"],["name","cloud-upload-outline","slot","start"],["size","auto",4,"ngFor","ngForOf"],["expand","block",3,"click","disabled"],[4,"ngIf"],[1,"results-header-container"],[1,"results-title"],[1,"results-actions"],["fill","solid","size","small","color","primary",3,"click",4,"ngIf"],["fill","clear","color","danger","size","small",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["size","3"],[1,"media-box"],["color","danger","fill","clear",1,"delete-btn",3,"click"],["name","close-circle"],[3,"src"],["class","success-overlay",4,"ngIf"],["class","abs-center",4,"ngIf"],[1,"success-overlay"],["name","checkmark-circle","color","success"],[1,"abs-center"],["size","auto"],["fill","clear",1,"delete-btn",3,"click"],[3,"src",4,"ngIf"],["muted","",3,"src",4,"ngIf"],["class","abs-center","color","light",4,"ngIf"],["muted","",3,"src"],["color","light",1,"abs-center"],["fill","solid","size","small","color","primary",3,"click"],["name","cloud-download-outline","slot","start"],["fill","clear","color","danger","size","small",3,"click"],["name","trash-bin-outline"],["slot","start"],[3,"color"],["slot","end",1,"task-actions"],["fill","clear",3,"click",4,"ngIf"],["fill","clear","color","secondary",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click"],["name","trash-outline","slot","icon-only"],["name","crescent",4,"ngIf"],["fill","clear",3,"click"],["name","download-outline","slot","icon-only"],["fill","clear","color","secondary",3,"click"],["name","open-outline","slot","icon-only"],["name","crescent"]],template:function(s,r){1&s&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3,"AI Face Swap"),t.k0s()()(),t.j41(4,"ion-item",1),t.nrm(5,"ion-icon",2),t.j41(6,"ion-label")(7,"h2"),t.EFF(8,"Face Enhance"),t.k0s(),t.j41(9,"p"),t.EFF(10,"Improve output face quality (Takes more time)"),t.k0s()(),t.j41(11,"ion-toggle",3),t.mxI("ngModelChange",function(c){return t.DH7(r.faceEnhance,c)||(r.faceEnhance=c),c}),t.k0s()(),t.j41(12,"ion-item",4),t.nrm(13,"ion-icon",5),t.j41(14,"ion-label"),t.EFF(15,"Auto-Process & Download"),t.k0s(),t.j41(16,"ion-toggle",3),t.mxI("ngModelChange",function(c){return t.DH7(r.isAutomationEnabled,c)||(r.isAutomationEnabled=c),c}),t.k0s()(),t.j41(17,"ion-content")(18,"ion-list-header"),t.EFF(19,"Step 1: Choose Faces"),t.k0s(),t.j41(20,"div",6)(21,"input",7),t.bIt("change",function(c){return r.handleFileSelect(c,"faces")}),t.k0s(),t.j41(22,"ion-button",8),t.EFF(23,"Upload Faces"),t.k0s(),t.j41(24,"ion-grid")(25,"ion-row"),t.DNE(26,Ft,7,5,"ion-col",9),t.k0s()()(),t.j41(27,"ion-list-header"),t.EFF(28,"Step 2: Choose Target Videos/Images"),t.k0s(),t.j41(29,"div",6)(30,"input",10),t.bIt("change",function(c){return r.handleFileSelect(c,"targets")}),t.k0s(),t.j41(31,"ion-button",11),t.nrm(32,"ion-icon",12),t.EFF(33," Upload Targets "),t.k0s(),t.j41(34,"ion-grid")(35,"ion-row"),t.DNE(36,Gt,8,6,"ion-col",13),t.k0s()()(),t.j41(37,"ion-button",14),t.bIt("click",function(){return r.startSwapProcess()}),t.DNE(38,$t,2,1,"span",15)(39,Ht,2,0,"span",15)(40,Vt,2,0,"span",15),t.k0s(),t.j41(41,"div",16)(42,"ion-label",17),t.EFF(43,"Results"),t.k0s(),t.j41(44,"div",18),t.DNE(45,Lt,3,0,"ion-button",19)(46,Yt,2,0,"ion-button",20),t.k0s()(),t.j41(47,"ion-list"),t.DNE(48,Wt,17,9,"ion-item",21),t.k0s()()),2&s&&(t.R7$(11),t.R50("ngModel",r.faceEnhance),t.R7$(5),t.R50("ngModel",r.isAutomationEnabled),t.R7$(10),t.Y8G("ngForOf",r.faces),t.R7$(10),t.Y8G("ngForOf",r.targets),t.R7$(),t.Y8G("disabled",r.isAllProcessing()),t.R7$(),t.Y8G("ngIf",!r.isAllProcessing()),t.R7$(),t.Y8G("ngIf",r.isAllProcessing()&&r.tasks.length>0),t.R7$(),t.Y8G("ngIf",0===r.faces.length||0===r.targets.length),t.R7$(5),t.Y8G("ngIf",r.tasks.length>0),t.R7$(),t.Y8G("ngIf",r.tasks.length>0),t.R7$(2),t.Y8G("ngForOf",r.tasks))},dependencies:[k.Sq,k.bT,x.BC,x.vS,d.In,d.Jm,d.hU,d.W9,d.lO,d.eU,d.iq,d.uz,d.he,d.nf,d.AF,d.ln,d.w2,d.Zx,d.BC,d.BY,d.ai,d.hB,k.Pc],styles:["ion-col[_ngcontent-%COMP%]{display:flex!important;justify-content:flex-start!important;align-items:center!important;padding:15px!important;min-width:120px!important;max-width:120px!important}.media-box[_ngcontent-%COMP%]{position:relative!important;width:100px!important;height:100px!important;border-radius:12px!important;border:3px solid transparent!important;background:#1e1e1e;display:block!important}.media-box.upload-success[_ngcontent-%COMP%]{border-color:#2dd36f!important}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .media-box[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%!important;height:100%!important;object-fit:cover!important;display:block!important}.delete-btn[_ngcontent-%COMP%]{position:absolute!important;top:-10px!important;right:-10px!important;margin:0!important;z-index:100!important;height:28px!important;width:28px!important;--padding-start: 0 !important;--padding-end: 0 !important}.delete-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px!important;color:#eb445a!important;background:#fff!important;border-radius:50%!important;box-shadow:0 2px 5px #00000080}.success-overlay[_ngcontent-%COMP%]{position:absolute!important;top:5px!important;left:5px!important;z-index:50!important;background:#fff!important;border-radius:50%!important;height:20px!important;width:20px!important;display:flex!important;align-items:center!important;justify-content:center!important}.success-overlay[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px!important}ion-col[_ngcontent-%COMP%]{padding:5px!important;flex:0 0 auto!important;width:auto!important}.media-box[_ngcontent-%COMP%]{position:relative!important;width:90px!important;height:90px!important;margin:5px}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .media-box[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%!important;height:100%!important;object-fit:cover;border-radius:8px}.delete-btn[_ngcontent-%COMP%]{position:absolute!important;top:-8px!important;right:-8px!important;margin:0!important;z-index:100!important;--padding-start: 0;--padding-end: 0;width:24px;height:24px}.delete-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;background:#fff;border-radius:50%}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.task-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;height:32px}ion-thumbnail[_ngcontent-%COMP%]{--border-radius: 4px;border:1px solid #444}.results-header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;background:#f8f9fa;border-bottom:1px solid #ddd;margin-top:10px}.results-header-container[_ngcontent-%COMP%]   .results-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--ion-color-dark)}.results-header-container[_ngcontent-%COMP%]   .results-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.results-header-container[_ngcontent-%COMP%]   .results-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;height:32px;font-size:12px;--border-radius: 6px}@media (prefers-color-scheme: dark){.results-header-container[_ngcontent-%COMP%]{background:#1e1e1e;border-bottom:1px solid #333}.results-header-container[_ngcontent-%COMP%]   .results-title[_ngcontent-%COMP%]{color:#fff}}"]}))}return o(),n})()}];let Jt=(()=>{var o;class n{static#t=o=()=>(this.\u0275fac=function(s){return new(s||n)},this.\u0275mod=t.$C({type:n}),this.\u0275inj=h.G2t({imports:[R.iI.forChild(Kt),R.iI]}))}return o(),n})(),Qt=(()=>{var o;class n{static#t=o=()=>(this.\u0275fac=function(s){return new(s||n)},this.\u0275mod=t.$C({type:n}),this.\u0275inj=h.G2t({imports:[k.MD,x.YN,d.bv,Jt]}))}return o(),n})()}}]);